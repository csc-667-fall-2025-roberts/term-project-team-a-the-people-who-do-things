<header class="main-header">
    <div class="header-content">
        <a href="/" class="logo">
            <h1>Scrabble</h1>
        </a>

        <nav class="main-nav">
            <% if (locals.user) { %>
                <a href="/lobby">Lobby</a>
                <a href="/settings">Settings</a>
                <span class="user-name"><%= user.display_name %></span>
                <button id="logout-btn" class="btn btn-small">Logout</button>
            <% } else { %>
                <a href="/login">Login</a>
                <a href="/signup">Sign Up</a>
            <% } %>
        </nav>
    </div>
</header>

<% if (locals.user) { %>
    <script type="module">
        import { api } from '/js/api.js';

        document.getElementById('logout-btn')?.addEventListener('click', async () => {
            try {
                await api.auth.logout();
                window.location.href = '/';
            } catch (error) {
                console.error('Logout failed:', error);
            }
        });
    </script>
<% } %>